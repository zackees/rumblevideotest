<!DOCTYPE html>
<html>

<head>
    <link rel="stylesheet" href="signup.css" />
    <link rel="stylesheet" href="index.css" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.1/css/all.min.css" />
    <!-- Add this style block to apply the font to the entire body of the document -->
    <!-- TODO audit which webfonts are actually necessary -->
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:wght@300,500|Oswald:400" />
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,300i,700,700i" />
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Poppins&display=swap">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=B612+Mono&display=swap">
</head>

<body>
    <h1>Video Test for Plandemic</h1>
    <h4>Checkout the subtitles!</h4>
    <h4>See that the video goes up to 1080p</h4>
    <h4>Click anywhere to play the video (for the first time)</h4>
    <!--AUTO GENERATED FROM RUMBLE EMBED-->
    <div id="rumble_v2nwlhq"></div>
    <!--END AUTO GENERATED FROM RUMBLE EMBED-->
    <section id="signup">
        <div id="signup-close-btn" class="close-btn" style="display: none;">
            <i class="fa fa-times"></i>
        </div>
        <h2>Watch Plandemic 3: The Great Awakening</h2>
        <p>Enter your email to view the film.</p>
        <!-- Input form for first name and email -->
        <form method="get" accept-charset="UTF-8" style="margin-bottom: 0px;">
            <div>
                <input id="singup_first_name" type="name" value="" name="name" placeholder="First Name"
                    style="background-color:rgba(255, 255, 255, .97);">
                <input id="signup_email" type="email" value="" name="email" placeholder="Email"
                    style="background-color:rgba(255, 255, 255, .97);">
            </div>
            <!-- real people should not fill this in and expect good things - do not remove this or risk form bot signups-->
            <div style="position: absolute; left: -5000px;" aria-hidden="true"><input type="text"
                    name="b_f8f8f8f8f8f8f8f8f8f8f8_f8f8f8f8f8f8f8f8f8f8f8" tabindex="-1" value=""></div>
            <div class="clear">
                <input type="submit" value="Watch Now" id="btn-signup" class="button">
            </div>
            <p id="signup-privacy-statement">
                By signing up, you agree to receive occasional emails from us and may choose to unsubscribe at anytime.
                View our
                <a href="#">Privacy Policy.</a>
            </p>
            <div id="text-privacy-policy" style="display: none" ;>
                <p style="font-size:10px;"><b>Privacy Policy</b></p>
                <p style="font-size:10px;">We respect your privacy and are committed to protecting it. We collect your
                    email for film updates, but we won't share it with anyone. You can unsubscribe at any time.</p>
                <p style="font-size:10px;">If you have questions about this Privacy Policy, please contact us.</p>
            </div>
        </form>
    </section>
    <!-- Dialog for invalid email -->
    <dialog id="dialogBox">
        <p id="dialogBoxmMessage">Invalid email, please try again.</p>
        <button id="closeBtn">Close</button>
    </dialog>
    <script src="signup.js"></script>
    <script>
        // THIS SECTION IS AUTO-GNERATED BY RUMBLE. YOU CAN REPLACE THIS WITH
        // AN EMBED CODE FROM RUMBLE
        !function (r, u, m, b, l, e) { r._Rumble = b, r[b] || (r[b] = function () { (r[b]._ = r[b]._ || []).push(arguments); if (r[b]._.length == 1) { l = u.createElement(m), e = u.getElementsByTagName(m)[0], l.async = 1, l.src = "https://rumble.com/embedJS/urq2e0" + (arguments[1].video ? '.' + arguments[1].video : '') + "/?url=" + encodeURIComponent(location.href) + "&args=" + encodeURIComponent(JSON.stringify([].slice.apply(arguments))), e.parentNode.insertBefore(l, e) } }) }(window, document, "script", "Rumble");
        Rumble("play", { "video": "v2nwlhq", "div": "rumble_v2nwlhq" });
        const $divRumble = document.getElementById('rumble_v2nwlhq');
        $divRumble.addEventListener('click', function (e) {
            if (signupIsActive()) {
                e.preventDefault();
                e.stopPropagation();
                return;
            }
        }, true);
        // END AUTO GENERATED SECTION
        function attachVideoClickHandler() {  // THIS IS OPTIONAL
            // When the rumble video element (from above) appears, attach a click handler
            // to it. This should work with any rumble copy and paste.
            let jobId = setInterval(() => {
                function findVideo(expectedParentId) {
                    let videos = document.getElementsByTagName('video');
                    if (videos.length < 1) {
                        return null;
                    }
                    for (let i = 0; i < videos.length; i++) {
                        let video = videos[i];
                        let parentElement = video.parentElement;
                        while (parentElement != null) {
                            if (parentElement.id === expectedParentId) {
                                return video;
                            }
                            parentElement = parentElement.parentElement;
                        }
                    }
                    return null;
                }
                // Check if the video is there
                let video = findVideo($divRumble.id);
                if (video == null) {
                    // Bail for this iteration.
                    return;
                }

                function handleBodyClick() {
                    // body clicks should only play the video if the signup is not active
                    if (signupIsActive()) {
                        return;
                    }
                    video.play();
                    // Remove the click handler after one click
                    document.body.removeEventListener('click', arguments.callee);
                }
                // Add the click handler
                document.body.addEventListener('click', handleBodyClick);
                clearInterval(jobId);  // Only attach click handler once.
            }, 16);
        }
        attachVideoClickHandler();

        setTimeout(() => {
            initSignup(function () {
                console.log('signup closed');
            });
        }, 1000);

    </script>
</body>

</html>